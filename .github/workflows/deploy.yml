- name: Setup Node.js
    uses: actions/setup-node@v4
    with:
      node-version: '20'
  
  - name: Install dependencies
    run: npm install
  
  - name: Build frontend
    run: npm run build
    env:
      VITE_API_DISABLED: 'true'
      VITE_USE_MOCK_DATA: 'true'
  
  - name: Deploy to server via SSH
    uses: appleboy/scp-action@master
    with:
      host: ${{ secrets.SSH_HOST }}
      username: ${{ secrets.SSH_USER }}
      key: ${{ secrets.SSH_KEY }}
      source: "dist/*"
      target: ${{ secrets.SSH_PATH }}
      strip_components: 1
