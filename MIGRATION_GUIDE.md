# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Yandex Cloud

## üìã –ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º

–ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤—Å–µ 26 backend-—Ñ—É–Ω–∫—Ü–∏–π —Å —Å–µ—Ä–≤–µ—Ä–æ–≤ poehali.dev –Ω–∞ —Ç–≤–æ–π –ª–∏—á–Ω—ã–π Yandex Cloud –∞–∫–∫–∞—É–Ω—Ç.

**–≠–∫–æ–Ω–æ–º–∏—è:** ‚ÇΩ68,000/–º–µ—Å—è—Ü (‚ÇΩ816,000/–≥–æ–¥)  
**–í—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏:** 45 –º–∏–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã  
**–†–∏—Å–∫ –ø–æ–ª–æ–º–∫–∏:** 5-10% (–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∑–∞ 2 –º–∏–Ω—É—Ç—ã)

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

- ‚úÖ Message Queue ‚Äî —É–∂–µ —Ç–≤–æ—è (`rsyacleaner`)
- ‚úÖ Message Queue –∫—Ä–µ–¥—ã ‚Äî —É–∂–µ –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö
- ‚úÖ PostgreSQL –±–∞–∑–∞ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–π ‚Äî –≥–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –í—Å–µ 26 —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## üìä –ß—Ç–æ –±—É–¥–µ—Ç –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–µ–π—á–∞—Å):
```
–§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí poehali.dev Cloud Functions ‚Üí —Ç–≤–æ—è –ë–î
–°—Ç–æ–∏–º–æ—Å—Ç—å: ‚ÇΩ80,000/–º–µ—Å—è—Ü
–í–æ—Ä–∫–µ—Ä–æ–≤: 1
```

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```
–§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí –¢–í–û–ô Yandex Cloud Functions ‚Üí —Ç–≤–æ—è –ë–î
–°—Ç–æ–∏–º–æ—Å—Ç—å: ‚ÇΩ12,000/–º–µ—Å—è—Ü
–í–æ—Ä–∫–µ—Ä–æ–≤: 10-100
```

---

## üéØ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ (–ø–æ—à–∞–≥–æ–≤–æ)

### –®–ê–ì 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Yandex Cloud (10 –º–∏–Ω—É—Ç)

#### 1.1. –°–æ–∑–¥–∞—Ç—å/–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
1. –ó–∞–π—Ç–∏ –Ω–∞ https://console.cloud.yandex.ru
2. –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å ID
3. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É (—Å–ø–∏—à—É—Ç 1‚ÇΩ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
4. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏–∞–ª (10,000‚ÇΩ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ 60 –¥–Ω–µ–π)

#### 1.2. –°–æ–∑–¥–∞—Ç—å Service Account –¥–ª—è –¥–µ–ø–ª–æ—è
1. –í –∫–æ–Ω—Å–æ–ª–∏: **IAM –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Üí **–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã**
2. –ù–∞–∂–∞—Ç—å **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
   - –ò–º—è: `github-deployer`
   - –†–æ–ª–∏: –≤—ã–±—Ä–∞—Ç—å **`editor`** (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º)
4. –ù–∞–∂–∞—Ç—å **–°–æ–∑–¥–∞—Ç—å**

#### 1.3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á
1. –û—Ç–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç `github-deployer`
2. –í–∫–ª–∞–¥–∫–∞ **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏**
3. –ù–∞–∂–∞—Ç—å **–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á**
4. **–°–ö–ê–ß–ê–¢–¨ JSON —Ñ–∞–π–ª** ‚Äî –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è GitHub Actions
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª –≤ –Ω–∞–¥—ë–∂–Ω–æ–µ –º–µ—Å—Ç–æ (–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á!)

---

### –®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub (5 –º–∏–Ω—É—Ç)

#### 2.1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
1. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ poehali.dev: **–°–∫–∞—á–∞—Ç—å** ‚Üí **–ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub**
2. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ GitHub
3. –í—ã–±—Ä–∞—Ç—å **–í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π
4. –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≥—Ä—É–∑–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

#### 2.2. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub
1. –ó–∞–π—Ç–∏ –≤ —Å–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞–∂–∞—Ç—å **New repository secret**
4. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:

**–°–µ–∫—Ä–µ—Ç 1: `YC_SERVICE_ACCOUNT_KEY`**
- Name: `YC_SERVICE_ACCOUNT_KEY`
- Value: **–í–µ—Å—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ JSON —Ñ–∞–π–ª–∞** (—Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ –≤ —à–∞–≥–µ 1.3)
- –ù–∞–∂–∞—Ç—å **Add secret**

**–°–µ–∫—Ä–µ—Ç 2: `YC_FOLDER_ID`**
- Name: `YC_FOLDER_ID`
- Value: ID —Ç–≤–æ–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ (–≥–¥–µ –∏—Å–∫–∞—Ç—å ‚Äî —Å–º. –Ω–∏–∂–µ)
- –ù–∞–∂–∞—Ç—å **Add secret**

**–ö–∞–∫ –Ω–∞–π—Ç–∏ Folder ID:**
1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud —Å–ª–µ–≤–∞ –≤—ã–±—Ä–∞—Ç—å —Ç–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ (–æ–±—ã—á–Ω–æ `default`)
2. –í URL –±—É–¥–µ—Ç `folder/XXXXXXX` ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å Folder ID
3. –ò–ª–∏: **–û–±–∑–æ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞** ‚Üí —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID –∏–∑ —Ç–∞–±–ª–∏—Ü—ã

---

### –®–ê–ì 3: –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–π (10 –º–∏–Ω—É—Ç)

#### 3.1. –Æ—Ä–∞ —Å–æ–∑–¥–∞—Å—Ç GitHub Actions workflow
- –§–∞–π–ª `.github/workflows/deploy.yml`
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –≤ —Ç–≤–æ–π Yandex Cloud

#### 3.2. –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π
1. –Æ—Ä–∞ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç workflow –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π –≤—Å–µ—Ö 26 —Ñ—É–Ω–∫—Ü–∏–π
3. –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å: GitHub ‚Üí **Actions** ‚Üí –≤—ã–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π workflow
4. –î–µ–ø–ª–æ–π –∑–∞–π–º—ë—Ç ~10 –º–∏–Ω—É—Ç (–ø–æ 20-30 —Å–µ–∫ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é)

#### 3.3. –ü–æ–ª—É—á–∏—Ç—å URL –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫:

```
‚úÖ rsya-batch-worker: https://functions.yandexcloud.net/d4e...
‚úÖ rsya-scheduler: https://functions.yandexcloud.net/d4e...
‚úÖ yandex-direct: https://functions.yandexcloud.net/d4e...
...
```

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –í–°–ï URL** –∏ –¥–∞—Ç—å –Æ—Ä–µ ‚Üí –æ–Ω –æ–±–Ω–æ–≤–∏—Ç `func2url.json`

---

### –®–ê–ì 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤ (5 –º–∏–Ω—É—Ç)

#### 4.1. –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä Message Queue ‚Üí rsya-batch-worker
1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud: **Cloud Functions** ‚Üí **–¢—Ä–∏–≥–≥–µ—Ä—ã**
2. –ù–∞–∂–∞—Ç—å **–°–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
   - **–ò–º—è:** `mq-to-batch-worker`
   - **–¢–∏–ø:** Message Queue
   - **–û—á–µ—Ä–µ–¥—å:** –≤—ã–±—Ä–∞—Ç—å `rsyacleaner`
   - **–°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:** –≤—ã–±—Ä–∞—Ç—å `github-deployer` (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å —Ä–æ–ª—å—é `functions.functionInvoker`)
   - **–§—É–Ω–∫—Ü–∏—è:** –≤—ã–±—Ä–∞—Ç—å `rsya-batch-worker`
   - **–†–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π:** `1`
4. –ù–∞–∂–∞—Ç—å **–°–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä**

#### 4.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Ç—Ä–∏–≥–≥–µ—Ä–∞
```bash
# –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud: Cloud Functions ‚Üí –¢—Ä–∏–≥–≥–µ—Ä—ã
# –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: –ê–∫—Ç–∏–≤–µ–Ω
```

---

### –®–ê–ì 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ func2url.json (2 –º–∏–Ω—É—Ç—ã)

–Æ—Ä–∞ –æ–±–Ω–æ–≤–∏—Ç —Ñ–∞–π–ª `/backend/func2url.json`:

**–ë—ã–ª–æ (poehali.dev):**
```json
{
  "rsya-batch-worker": "https://functions.poehali.dev/2642bac6-...",
  "yandex-direct": "https://functions.poehali.dev/6b18ca7b-..."
}
```

**–°—Ç–∞–Ω–µ—Ç (—Ç–≤–æ–π Yandex Cloud):**
```json
{
  "rsya-batch-worker": "https://functions.yandexcloud.net/d4e...",
  "yandex-direct": "https://functions.yandexcloud.net/d4e..."
}
```

–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ ‚Üí —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞—á–Ω—ë—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –¢–í–û–ò–ú —Ñ—É–Ω–∫—Ü–∏—è–º!

---

### –®–ê–ì 6: –ó–∞–ø—Ä–æ—Å –∫–≤–æ—Ç—ã –Ω–∞ 100 –≤–æ—Ä–∫–µ—Ä–æ–≤ (2 –º–∏–Ω—É—Ç—ã)

#### 6.1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–≤–æ—Ç—ã
1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud: **–û–±–∑–æ—Ä** ‚Üí **–ö–≤–æ—Ç—ã**
2. –ù–∞–π—Ç–∏ **Cloud Functions**
3. –ù–∞–∂–∞—Ç—å **–ò–∑–º–µ–Ω–∏—Ç—å –∫–≤–æ—Ç—ã**
4. –ù–∞–π—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä: **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –æ–¥–Ω–æ–π –∑–æ–Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏**
5. –£–∫–∞–∑–∞—Ç—å:
   - –¢–µ–∫—É—â–∞—è –∫–≤–æ—Ç–∞: `10`
   - –ù–æ–≤–∞—è –∫–≤–æ—Ç–∞: `100`
   - –ü—Ä–∏—á–∏–Ω–∞: `Batch processing system for RS–Ø cleaner. Need 100 parallel workers for processing 100k projects/day`
6. –ù–∞–∂–∞—Ç—å **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å**

#### 6.2. –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
- –û–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ 1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏—è: 50-70%
- –ü–æ–∫–∞ –∂–¥—ë—à—å ‚Äî –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å 10 –≤–æ—Ä–∫–µ—Ä–∞–º–∏ (–≤—Å—ë —Ä–∞–≤–Ω–æ —ç–∫–æ–Ω–æ–º–∏—è ‚ÇΩ68k/–º–µ—Å—è—Ü)

#### 6.3. –ü–ª–∞–Ω –ë (–µ—Å–ª–∏ –∫–≤–æ—Ç—É –Ω–µ –¥–∞–¥—É—Ç)
- –†–∞–±–æ—Ç–∞—Ç—å —Å 10-30 –≤–æ—Ä–∫–µ—Ä–∞–º–∏ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –¥–æ–ª—å—à–µ)
- –ò–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–æ—Ä–∫–µ—Ä—ã –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (Docker + –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

### –®–ê–ì 7: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç (5 –º–∏–Ω—É—Ç)

#### 7.1. –ó–∞–ø—É—Å—Ç–∏—Ç—å scheduler –≤—Ä—É—á–Ω—É—é
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL —Ñ—É–Ω–∫—Ü–∏–∏ rsya-scheduler –∏–∑ func2url.json
curl -X GET https://functions.yandexcloud.net/d4e.../rsya-scheduler
```

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
```json
{
  "success": true,
  "scheduled_projects": 5,
  "total_batches": 35
}
```

#### 7.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞—Ç—á–∏ –≤ –ë–î
–ü–æ–ø—Ä–æ—Å–∏ –Æ—Ä—É –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL:
```sql
SELECT COUNT(*), status 
FROM rsya_campaign_batches 
WHERE created_at > NOW() - INTERVAL '10 minutes'
GROUP BY status;
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
status      | count
------------|------
pending     | 10-20  (–∂–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏)
processing  | 1-5    (–≤–æ—Ä–∫–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç)
completed   | 5-15   (—É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã)
```

#### 7.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π
1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud: **Cloud Functions** ‚Üí **–§—É–Ω–∫—Ü–∏–∏**
2. –í—ã–±—Ä–∞—Ç—å `rsya-batch-worker`
3. –í–∫–ª–∞–¥–∫–∞ **–õ–æ–≥–∏**
4. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ —Ç–∏–ø–∞:
```
‚úÖ Batch 123: 14 success, 0 failed, 0 skipped (187s)
üö´ Campaign 456: blocked 23 platforms
```

---

## üî• –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ (–û—Ç–∫–∞—Ç –∑–∞ 2 –º–∏–Ω—É—Ç—ã)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–∞—Ç func2url.json
–Æ—Ä–∞ –æ—Ç–∫–∞—Ç–∏—Ç —Ñ–∞–π–ª –Ω–∞ —Å—Ç–∞—Ä—ã–π (—Å poehali.dev URL) ‚Üí –≤—Å—ë –≤–µ—Ä–Ω—ë—Ç—Å—è –∫–∞–∫ –±—ã–ª–æ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Yandex Cloud
1. –í –∫–æ–Ω—Å–æ–ª–∏: **Cloud Functions** ‚Üí –≤—ã–±—Ä–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
2. –í–∫–ª–∞–¥–∫–∞ **–†–µ–¥–∞–∫—Ç–æ—Ä**
3. –°–µ–∫—Ü–∏—è **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å:
   - `DATABASE_URL`
   - `YANDEX_MQ_ACCESS_KEY_ID`
   - `YANDEX_MQ_SECRET_KEY`
   - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ poehali.dev

---

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ –í—Å–µ 26 —Ñ—É–Ω–∫—Ü–∏–π –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud)
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä MQ ‚Üí batch-worker –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ func2url.json –æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ –Ω–æ–≤—ã–µ URL
- ‚úÖ Scheduler —Å–æ–∑–¥–∞—ë—Ç –±–∞—Ç—á–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î)
- ‚úÖ –í–æ—Ä–∫–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –±–∞—Ç—á–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞):
```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞—Ç—á–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
SELECT 
    status, 
    COUNT(*) as count,
    AVG(processing_time_sec) as avg_time
FROM rsya_campaign_batches
WHERE created_at > NOW() - INTERVAL '1 hour'
GROUP BY status;

-- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –±–∞—Ç—á–∏
SELECT 
    id, project_id, status, retry_count, error_message
FROM rsya_campaign_batches
WHERE status = 'failed'
ORDER BY created_at DESC
LIMIT 10;
```

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ |
|----------|-------------|----------------|
| **–°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü** | ‚ÇΩ80,000 | ‚ÇΩ12,000 |
| **–≠–∫–æ–Ω–æ–º–∏—è/–º–µ—Å—è—Ü** | ‚Äî | ‚ÇΩ68,000 |
| **–≠–∫–æ–Ω–æ–º–∏—è/–≥–æ–¥** | ‚Äî | ‚ÇΩ816,000 |
| **–í–æ—Ä–∫–µ—Ä–æ–≤** | 1 | 10-100 |
| **–°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏** | 100k –ø—Ä–æ–µ–∫—Ç–æ–≤/–¥–µ–Ω—å | 100k –ø—Ä–æ–µ–∫—Ç–æ–≤/–¥–µ–Ω—å (–≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ) |

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–µ–≥–æ–¥–Ω—è:** –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Yandex Cloud –∞–∫–∫–∞—É–Ω—Ç
2. **–ó–∞–≤—Ç—Ä–∞:** –Æ—Ä–∞ —Å–æ–∑–¥–∞—Å—Ç GitHub Actions ‚Üí –ø–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π
3. **–ß–µ—Ä–µ–∑ 1-3 –¥–Ω—è:** –ü—Ä–∏–¥—ë—Ç –æ—Ç–≤–µ—Ç –ø–æ –∫–≤–æ—Ç–µ ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å 100 –≤–æ—Ä–∫–µ—Ä–æ–≤
4. **–ß–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏—é –Ω–∞ –±–∏–ª–ª–∏–Ω–≥–µ Yandex Cloud

---

## ‚ùì FAQ

**Q: –ß—Ç–æ –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∑–∞–¥–µ–ø–ª–æ—è—Ç—Å—è?**  
A: –û—Ç–∫–∞—Ç–∏–º—Å—è –Ω–∞ poehali.dev –∑–∞ 2 –º–∏–Ω—É—Ç—ã (–≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π func2url.json)

**Q: –ß—Ç–æ –µ—Å–ª–∏ –∫–≤–æ—Ç—É –Ω–∞ 100 –≤–æ—Ä–∫–µ—Ä–æ–≤ –Ω–µ –¥–∞–¥—É—Ç?**  
A: –ë—É–¥–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å 10 –≤–æ—Ä–∫–µ—Ä–∞–º–∏ (–≤—Å—ë —Ä–∞–≤–Ω–æ —ç–∫–æ–Ω–æ–º–∏—è ‚ÇΩ68k/–º–µ—Å—è—Ü). –ò–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—ë–º –≤–æ—Ä–∫–µ—Ä—ã –Ω–∞ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä.

**Q: –°–º–æ–≥—É –ª–∏ —è –º–µ–Ω—è—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏?**  
A: –î–ê! –Æ—Ä–∞ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å –∫–æ–¥ ‚Üí –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ GitHub ‚Üí GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç.

**Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–π–º—ë—Ç –º–∏–≥—Ä–∞—Ü–∏—è?**  
A: 45 –º–∏–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã + 1-3 –¥–Ω—è –æ–∂–∏–¥–∞–Ω–∏—è –∫–≤–æ—Ç—ã.

**Q: –ú–æ–≥—É –ª–∏ —è –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ?**  
A: –î–ê! –ó–∞ 2 –º–∏–Ω—É—Ç—ã ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π func2url.json.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏ –Æ—Ä–µ, –∏ –æ–Ω –≤—Å—ë –ø–æ—á–∏–Ω–∏—Ç! üöÄ
